{% extends 'base.html' %}

{% block title %}หมวดหมู่สัตว์เลี้ยง - Pet Store{% endblock %}

{% block extra_css %}
<style>
    .category-card {
        background: linear-gradient(135deg, #ffffff 0%, #f8fdfa 100%);
        border: none;
        border-radius: 20px;
        box-shadow: 0 8px 25px rgba(45, 106, 79, 0.08);
        transition: all 0.3s ease;
        overflow: hidden;
        border-left: 4px solid #40916c;
    }
    
    .category-card:hover {
        transform: translateY(-8px);
        box-shadow: 0 15px 35px rgba(45, 106, 79, 0.15);
        border-left: 4px solid #52b788;
    }
    
    .category-icon {
        transition: all 0.3s ease;
        margin-bottom: 1.5rem;
    }
    
    .category-card:hover .category-icon {
        transform: scale(1.1);
    }
    
    .section-title {
        color: #2d6a4f;
        font-weight: 700;
        position: relative;
        display: inline-block;
        margin-bottom: 1rem;
    }
    
    .section-title::after {
        content: '';
        position: absolute;
        bottom: -8px;
        left: 0;
        width: 60px;
        height: 3px;
        background: linear-gradient(45deg, #40916c, #52b788);
        border-radius: 2px;
    }
    
    .nature-badge {
        background: linear-gradient(45deg, #40916c, #52b788);
        color: white;
        border-radius: 15px;
        padding: 6px 12px;
        font-size: 0.8em;
        font-weight: 600;
    }
    
    .stats-badge {
        background: rgba(64, 145, 108, 0.1);
        color: #2d6a4f;
        border: 1px solid rgba(64, 145, 108, 0.3);
        border-radius: 15px;
        padding: 4px 10px;
        font-size: 0.75em;
        font-weight: 500;
    }
    
    .btn-nature {
        background: linear-gradient(45deg, #40916c, #52b788);
        border: none;
        color: white;
        font-weight: 600;
        padding: 8px 20px;
        border-radius: 20px;
        transition: all 0.3s ease;
    }
    
    .btn-nature:hover {
        transform: translateY(-2px);
        box-shadow: 0 8px 20px rgba(64, 145, 108, 0.3);
        color: white;
    }
    
    .btn-outline-nature {
        border: 2px solid #40916c;
        color: #40916c;
        font-weight: 600;
        padding: 8px 20px;
        border-radius: 20px;
        transition: all 0.3s ease;
    }
    
    .btn-outline-nature:hover {
        background: #40916c;
        color: white;
        transform: translateY(-2px);
    }
    
    .hero-section {
        background: linear-gradient(135deg, #2d6a4f 0%, #40916c 50%, #52b788 100%);
        color: white;
        padding: 3rem 0;
        border-radius: 0 0 30px 30px;
        margin-bottom: 3rem;
    }
    
    .admin-card {
        background: linear-gradient(135deg, #f8fdfa 0%, #e8f5e8 100%);
        border: 2px solid #40916c;
        border-radius: 20px;
        box-shadow: 0 10px 30px rgba(45, 106, 79, 0.1);
    }
    
    .cta-section {
        background: linear-gradient(135deg, #2d6a4f 0%, #40916c 100%);
        color: white;
        border-radius: 30px;
        padding: 3rem 2rem;
        margin-top: 3rem;
    }
    
    .empty-state {
        background: linear-gradient(135deg, #f8fdfa 0%, #f0f7f4 100%);
        border-radius: 20px;
        padding: 4rem 2rem;
        text-align: center;
    }
    
    .icon-dog { color: #ff6b6b; }
    .icon-cat { color: #4ecdc4; }
    .icon-bird { color: #45b7d1; }
    .icon-fish { color: #96ceb4; }
    .icon-reptile { color: #feca57; }
    .icon-default { color: #40916c; }
</style>
{% endblock %}

{% block content %}
<!-- Hero Section -->
<section class="hero-section">
    <div class="container">
        <div class="row align-items-center">
            <div class="col-lg-8">
                <h1 class="display-5 fw-bold mb-3">
                    <i class="fas fa-paw me-3"></i>ค้นหาสัตว์เลี้ยงตามประเภท
                </h1>
                <p class="lead mb-4 opacity-90" style="font-size: 1.2rem;">
                    ค้นพบสัตว์เลี้ยงน่ารักๆ จาก 5 หมวดหมู่หลัก 
                    พร้อมเป็นส่วนหนึ่งในครอบครัวของคุณ
                </p>
                <div class="d-flex flex-wrap gap-3">
                    <a href="{% url 'pet_list' %}" class="btn btn-light btn-lg">
                        <i class="fas fa-search me-2"></i>ดูสัตว์เลี้ยงทั้งหมด
                    </a>
                    <a href="#categories" class="btn btn-outline-light btn-lg">
                        <i class="fas fa-arrow-down me-2"></i>ดูหมวดหมู่
                    </a>
                </div>
            </div>
            <div class="col-lg-4 text-center">
                <i class="fas fa-list-alt fa-6x opacity-25"></i>
            </div>
        </div>
    </div>
</section>

<!-- Category Grid -->
<div class="container" id="categories">
    <div class="row mb-5">
        <div class="col-12">
            <h2 class="section-title">หมวดหมู่ทั้งหมด</h2>
            <p class="text-muted mb-4">เลือกดูสัตว์เลี้ยงจาก 5 หมวดหมู่หลัก</p>
        </div>
    </div>

    <div class="row">
        {% for category in categories %}
        <div class="col-xl-3 col-lg-4 col-md-6 mb-4">
            <div class="card category-card h-100">
                <div class="card-body text-center p-4">
                    <!-- Category Icon -->
                    <div class="category-icon">
                        {% if "สุนัข" in category.name %}
                        <i class="fas fa-dog fa-4x icon-dog"></i>
                        {% elif "แมว" in category.name %}
                        <i class="fas fa-cat fa-4x icon-cat"></i>
                        {% elif "นก" in category.name %}
                        <i class="fas fa-dove fa-4x icon-bird"></i>
                        {% elif "ปลา" in category.name %}
                        <i class="fas fa-fish fa-4x icon-fish"></i>
                        {% elif "สัตว์เลื้อยคลาน" in category.name %}
                        <i class="fas fa-dragon fa-4x icon-reptile"></i>
                        {% else %}
                        <i class="fas fa-paw fa-4x icon-default"></i>
                        {% endif %}
                    </div>
                    
                    <!-- Category Name -->
                    <h4 class="card-title fw-bold mb-3" style="color: #2d6a4f;">{{ category.name }}</h4>
                    
                    <!-- Category Description -->
                    {% if category.description %}
                    <p class="card-text text-muted mb-4">
                        {{ category.description }}
                    </p>
                    {% else %}
                    <p class="card-text text-muted mb-4">
                        สัตว์เลี้ยง{{ category.name }}น่ารักและเป็นมิตร
                    </p>
                    {% endif %}
                    
                    <!-- Category Stats -->
                    <div class="category-stats mb-4">
                        {% with pet_count=category.pet_set.count %}
                        <span class="nature-badge">{{ pet_count }} ชนิด</span>
                        
                        <!-- แสดงจำนวนสัตว์เลี้ยงที่พร้อมขายแบบง่าย -->
                        {% if pet_count > 0 %}
                        <span class="stats-badge ms-2">พร้อมขาย</span>
                        {% else %}
                        <span class="stats-badge ms-2">รอสินค้า</span>
                        {% endif %}
                        {% endwith %}
                    </div>
                    
                    <!-- Action Button -->
                    <a href="{% url 'pet_list' %}?category={{ category.id }}" class="btn btn-outline-nature w-100">
                        <i class="fas fa-eye me-2"></i>ดู{{ category.name }}ทั้งหมด
                    </a>
                </div>
            </div>
        </div>
        {% empty %}
        <!-- Empty State -->
        <div class="col-12">
            <div class="empty-state">
                <i class="fas fa-folder-open fa-5x mb-4" style="color: #40916c;"></i>
                <h3 class="text-muted mb-3">ยังไม่มีหมวดหมู่สัตว์เลี้ยง</h3>
                <p class="text-muted mb-4">เริ่มต้นโดยการเพิ่มหมวดหมู่แรกของคุณผ่านระบบจัดการ</p>
                <div class="d-flex flex-wrap gap-3 justify-content-center">
                    {% if user.is_staff %}
                    <a href="/admin/pets/category/add/" class="btn btn-nature">
                        <i class="fas fa-plus-circle me-2"></i> เพิ่มหมวดหมู่แรก
                    </a>
                    <a href="/admin/pets/pet/add/" class="btn btn-outline-nature">
                        <i class="fas fa-paw me-2"></i> เพิ่มสัตว์เลี้ยง
                    </a>
                    {% else %}
                    <a href="{% url 'home' %}" class="btn btn-nature">
                        <i class="fas fa-home me-2"></i> กลับสู่หน้าแรก
                    </a>
                    {% endif %}
                </div>
            </div>
        </div>
        {% endfor %}
    </div>
</div>

<!-- Call to Action -->
<div class="container">
    <div class="row mt-5">
        <div class="col-12">
            <div class="cta-section">
                <div class="text-center">
                    <h3 class="mb-3">พร้อมที่จะค้นหาสัตว์เลี้ยงน่ารักแล้วหรือยัง?</h3>
                    <p class="mb-4 opacity-90">ค้นพบสัตว์เลี้ยงที่สมบูรณ์แบบจาก 5 หมวดหมู่หลัก</p>
                    <div class="d-flex flex-wrap gap-3 justify-content-center">
                        <a href="{% url 'pet_list' %}" class="btn btn-light btn-lg">
                            <i class="fas fa-search me-2"></i>ดูสัตว์เลี้ยงทั้งหมด
                        </a>
                        <a href="{% url 'home' %}" class="btn btn-outline-light btn-lg">
                            <i class="fas fa-home me-2"></i>กลับสู่หน้าแรก
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}